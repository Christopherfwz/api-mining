# Plot itemset precision-recall
import matplotlib.pyplot as plt
from matplotlib import rc
import numpy as np

rc('xtick', labelsize=16) 
rc('ytick', labelsize=16) 

# Data
dct = {}
# Caviar IIM
p = [0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.9523809523809523, 0.9545454545454546, 0.9565217391304348, 0.9583333333333334, 0.96, 0.9615384615384616, 0.9629629629629629, 0.9642857142857143, 0.9655172413793104, 0.9666666666666667, 0.967741935483871, 0.96875, 0.9696969696969697, 0.9705882352941176, 0.9714285714285714, 0.9722222222222222, 0.972972972972973, 0.9736842105263158, 0.9743589743589743, 0.975, 0.975609756097561, 0.9761904761904762, 0.9767441860465116, 0.9772727272727273, 0.9777777777777777, 0.9782608695652174, 0.9787234042553191, 0.9791666666666666, 0.9795918367346939, 0.98, 0.9803921568627451, 0.9807692307692307, 0.9811320754716981, 0.9814814814814815, 0.9818181818181818, 0.9821428571428571, 0.9824561403508771, 0.9827586206896551, 0.9830508474576272, 0.9833333333333333, 0.9836065573770492, 0.9838709677419355, 0.9841269841269841, 0.984375, 0.9846153846153847, 0.9848484848484849, 0.9850746268656716, 0.9852941176470589, 0.9855072463768116, 0.9857142857142858, 0.9859154929577465, 0.9861111111111112, 0.9863013698630136, 0.9864864864864865, 0.9866666666666667, 0.9868421052631579, 0.987012987012987, 0.9871794871794872, 0.9873417721518988, 0.9875, 0.9876543209876543, 0.9878048780487805, 0.9879518072289156, 0.9880952380952381, 0.9882352941176471, 0.9883720930232558, 0.9885057471264368, 0.9886363636363636, 0.9887640449438202, 0.9888888888888889, 0.989010989010989, 0.9891304347826086, 0.989247311827957, 0.9893617021276596, 0.9894736842105263, 0.9895833333333334, 0.9896907216494846, 0.9897959183673469, 0.98989898989899, 0.99, 0.9900990099009901, 0.9901960784313726, 0.9805825242718447, 0.9807692307692307, 0.9809523809523809, 0.9811320754716981, 0.9813084112149533, 0.9814814814814815, 0.981651376146789, 0.9818181818181818, 0.972972972972973, 0.9732142857142857, 0.9734513274336283, 0.9736842105263158, 0.9739130434782609, 0.9741379310344828, 0.9743589743589743, 0.9745762711864406, 0.9663865546218487, 0.9583333333333334, 0.9504132231404959, 0.9508196721311475, 0.9512195121951219, 0.9435483870967742, 0.936, 0.9365079365079365, 0.9291338582677166, 0.9296875, 0.9302325581395349, 0.9230769230769231, 0.9236641221374046, 0.9242424242424242, 0.924812030075188, 0.9253731343283582, 0.9259259259259259, 0.9191176470588235, 0.9197080291970803, 0.9202898550724637, 0.9136690647482014, 0.9071428571428571, 0.9078014184397163, 0.9084507042253521, 0.9090909090909091, 0.9097222222222222, 0.903448275862069, 0.9041095890410958, 0.9047619047619048, 0.9054054054054054, 0.9060402684563759, 0.9, 0.8940397350993378, 0.8947368421052632, 0.8954248366013072, 0.8896103896103896, 0.8903225806451613, 0.8910256410256411, 0.89171974522293, 0.8924050632911392, 0.8867924528301887, 0.88125, 0.8819875776397516, 0.8765432098765432, 0.8711656441717791, 0.8658536585365854, 0.8666666666666667, 0.8614457831325302, 0.8562874251497006, 0.8571428571428571]
r = [0.0, 0.03333333333333333, 0.06666666666666667, 0.1, 0.13333333333333333, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.16666666666666666, 0.2, 0.23333333333333334, 0.26666666666666666, 0.3, 0.3333333333333333, 0.36666666666666664, 0.4, 0.43333333333333335, 0.4666666666666667, 0.5, 0.5333333333333333, 0.5666666666666667, 0.6, 0.6333333333333333, 0.6666666666666666, 0.7, 0.7333333333333333, 0.7666666666666667, 0.8, 0.8333333333333334, 0.8666666666666667, 0.9, 0.9333333333333333, 0.9666666666666667, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
dct['caviar','IIM_precision'] = p[0:50] 
dct['caviar','IIM_recall'] =  r[0:50]
# Caviar MTV
dct['caviar','MTV_precision'] = [0.0, 0.0, 0.5, 0.6666666666666666, 0.5, 0.6, 0.5, 0.5714285714285714, 0.625, 0.5555555555555556, 0.6, 0.6363636363636364, 0.6666666666666666, 0.6153846153846154, 0.6428571428571429, 0.6666666666666666, 0.6875, 0.7058823529411765, 0.7222222222222222, 0.7368421052631579, 0.75, 0.7619047619047619, 0.7727272727272727, 0.782608695652174, 0.7916666666666666, 0.8, 0.8076923076923077, 0.8148148148148148, 0.8214285714285714, 0.8275862068965517]
dct['caviar','MTV_recall'] = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.03333333333333333, 0.06666666666666667, 0.1, 0.13333333333333333, 0.16666666666666666, 0.2, 0.23333333333333334, 0.26666666666666666, 0.3, 0.3333333333333333, 0.36666666666666664, 0.4, 0.43333333333333335, 0.4666666666666667, 0.5, 0.5333333333333333]
# Caviar FIM
#dct['caviar','FIM_precision'] = [5.223195791283624E-6]
#dct['caviar','FIM_recall'] = [0.6]
# Freerider IIM
#dct['freerider','IIM_precision'] = [0.8356164383561644, 0.7975460122699386, 0.8571428571428571, 0.8430232558139535, 0.8857142857142857, 0.8135593220338984]
#dct['freerider','IIM_recall'] = [1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
# Freerider MTV
#dct['freerider','MTV_precision'] = [0.8928571428571429, 0.9117647058823529, 0.8974358974358975, 0.9090909090909091, 0.9183673469387755, 0.94]
#dct['freerider','MTV_recall'] =  [1.0, 1.0, 1.0, 1.0, 1.0, 0.9333333333333333]
# Freerider FIM
#dct['freerider','FIM_precision'] = 
#dct['freerider','FIM_recall'] =

def main():
    
    probname = 'caviar'
    #probname = 'freerider'
    
    cols = ['r','g','b']
    prefixes = ['IIM','MTV']#,'FIM']
    
    for prefix in prefixes:
    
        precision = dct[probname,prefix+'_precision']
        recall = dct[probname,prefix+'_recall']
        plotfigpr(precision,recall,probname,1)
        
        
    plt.figure(1)   
    plt.legend(['IIM','MTV','FIM'],'lower right')
    plt.show()

def plotfigpr(precision,recall,probname,figno):

    # sort
    ind = np.array(recall).argsort()
    r_d = np.array(recall)[ind]
    p_d = np.array(precision)[ind]

    plt.figure(figno)
    plt.hold(True)
    plt.plot(r_d,p_d,'.-',linewidth=2,markersize=12,clip_on=False)
    #plt.title(probname+' top-k precison-recall')
    plt.xlabel('Recall (rare)',fontsize=16)
    plt.ylabel('Precision (all)',fontsize=16)
    plt.xlim([0,1])
    plt.ylim([0,1])
    plt.grid(True)

def plotfigpandr(x,precision,recall,probname,name,col,figno):
    
    plt.figure(figno)
    plt.hold(True)
    plt.plot(x,precision,'.-',linewidth=2,markersize=12,color=col)
    plt.plot(x,recall,'.--',linewidth=2,markersize=12,color=col)
    plt.title(probname+' Precison-Recall - '+name)
    plt.xlabel(name)
    plt.ylabel('Precision/Recall')
    #plt.legend(['Precision','Recall'],'lower left')
    plt.xlim([1,max(x)])
    plt.ylim([-0.1,1.1])
    plt.grid(True)

main()
